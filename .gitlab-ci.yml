build:
    stage: build
    image: ghcr.io/nrfconnect/sdk-nrf-toolchain:v2.7.0
    variables:
        DEBIAN_FRONTEND: noninteractive # CI is a non-interactive shell
        ACCEPT_JLINK_LICENSE: 0         # JLink isn't needed for building
        APPDIR: ./app
    script:
        - cd $APPDIR
        - west init --local
        - west update
        - west build --board capbot
    cache:
        key: west-cache
        paths:
        - deps/
    artifacts:
      when: on_success
      expire_in: "1 week"
      paths:
        - $APPDIR/build/
